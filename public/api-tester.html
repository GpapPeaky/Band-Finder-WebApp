<!DOCTYPE html>
<html>
  <head>
    <title>API Tester</title>
  </head>
  <body>
    <hr />
    <h2>Band Reviews (GET)</h2>
    <input type="text" id="bandInput" placeholder="Enter band name or 'all'" />
    <button onclick="getReview()">Fetch Reviews</button>
    <div
      id="reviewContainer"
      style="white-space: pre-wrap; margin-top: 10px"
    ></div>

    <hr />
    <h2>Update Review Status (PUT)</h2>
    <input id="u_id" placeholder="Review ID" />
    <input id="u_status" placeholder="published or rejected" />
    <button onclick="updateReviewStatus()">Update</button>
    <pre id="putResult"></pre>

    <hr />
    <h2>Delete Review (DELETE)</h2>
    <input id="d_id" placeholder="Review ID" />
    <button onclick="deleteReview()">Delete</button>
    <pre id="deleteResult"></pre>
    <hr />
    <script>
      async function getReview() {
        const band = document.getElementById("bandInput").value || "all";
        try {
          const response = await fetch(`/reviews/${band}`);
          const data = await response.json();
          document.getElementById("reviewContainer").textContent =
            JSON.stringify(data, null, 2);
        } catch (error) {
          document.getElementById("reviewContainer").textContent =
            "Error: " + error.message;
        }
      }

      async function updateReviewStatus() {
        const id = document.getElementById("u_id").value;
        const status = document.getElementById("u_status").value;
        try {
          const response = await fetch(`/reviewStatus/${id}/${status}`, {
            method: "PUT",
          });
          const data = await response.json();
          document.getElementById("putResult").textContent = JSON.stringify(
            data,
            null,
            2
          );
        } catch (error) {
          document.getElementById("putResult").textContent =
            "Error: " + error.message;
        }
      }

      async function deleteReview() {
        const id = document.getElementById("d_id").value;
        try {
          const response = await fetch(`/reviewDeletion/${id}`, {
            method: "DELETE",
          });
          const data = await response.json();
          document.getElementById("deleteResult").textContent = JSON.stringify(
            data,
            null,
            2
          );
        } catch (error) {
          document.getElementById("deleteResult").textContent =
            "Error: " + error.message;
        }
      }
    </script>
  </body>
</html>
