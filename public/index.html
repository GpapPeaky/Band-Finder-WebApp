<!doctype html>
<html>
  <!-- INDEX.HTML | LOGIN PAGE -->
  <head>
    <meta charset="UTF-8" />
    <title>Log in</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Allready have an account , login from this page."
    />
    <meta name="keywords" content="csd, personal, website, hy359,login" />
    <meta name="author" content="Apostolakis Giorgos" />
    <link rel="stylesheet" href="./CSS/login.css" />
  </head>
  <body>
    <div class="container">
      <h1>Login</h1>
      <form id="SimpleUserForm">
        <input
          type="text"
          name="username"
          id="simpleUsername"
          placeholder="Username"
          required
        />
        <input
          type="password"
          name="password"
          id="simplePassword"
          placeholder="Password"
          required
        />
        <select name="type" id="simpleType" required>
          <option value="Simple User">Simple User</option>
          <option value="Band User">Band User</option>
          <option value="Admin User">Admin</option>
        </select>
        <div id="messagebox"></div>
        <button class="submitbtton" type="submit">Login</button>

        <!-- Guest Login Button -->
        <button class="guestButton" type="button" onclick="guestLogin()">
          Login as Guest
        </button>
      </form>

      <form id="BandUserForm">
        <input
          type="text"
          name="username"
          id="bandUsername"
          placeholder="Band username"
          required
        />
        <input
          type="password"
          name="password"
          id="bandPassword"
          placeholder="Password"
          required
        />
        <select name="type" id="bandType" required>
          <option value="Simple User">Simple User</option>
          <option value="Band User">Band User</option>
          <option value="Admin User">Admin</option>
        </select>
        <div id="bandmessagebox"></div>
        <button class="submitbtton" type="submit">Login</button>
      </form>
      <form id="AdminUserForm">
        <input
          type="text"
          name="username"
          id="adminUsername"
          placeholder="Admin username"
          required
        />
        <input
          type="password"
          name="password"
          id="adminPassword"
          placeholder="Password"
          required
        />
        <select name="type" id="adminType" required>
          <option value="Simple User">Simple User</option>
          <option value="Band User">Band User</option>
          <option value="Admin User">Admin</option>
        </select>
        <div id="adminmessagebox"></div>
        <button class="submitbtton" type="submit">Login</button>
      </form>
      <p>Don't have an account? <a href="./register.html">Register</a></p>
    </div>
    <script src="./JS/loginCheck.js"></script>
  </body>
  <script>
    // ----------------------------------------------------------------
    // CONFIGURATION
    // ----------------------------------------------------------------
    const THEME_COLORS = {
      "Simple User": "#adf8db",    // Light green
      "Band User": "#f79fceff",    // Pink
      "Admin User": "#D02752"      // Dark red
    };
    
    const DEBUG_UI = true; // Set to false to disable UI debug logs
    
    // ----------------------------------------------------------------
    // HELPER FUNCTIONS
    // ----------------------------------------------------------------
    
    /**
     * Debug logger for UI changes
     */
    function debugUI(...args) {
      if (DEBUG_UI) {
        console.log("[UI DEBUG]", ...args);
      }
    }
    
    /**
     * Get references to all form type selectors
     */
    function getTypeSelectors() {
      return {
        simple: document.getElementById("simpleType"),
        band: document.getElementById("bandType"),
        admin: document.getElementById("adminType")
      };
    }
    
    /**
     * Get references to all login forms
     */
    function getForms() {
      return {
        simple: document.getElementById("SimpleUserForm"),
        band: document.getElementById("BandUserForm"),
        admin: document.getElementById("AdminUserForm")
      };
    }
    
    // ----------------------------------------------------------------
    // FORM SWITCHING
    // ----------------------------------------------------------------
    
    /**
     * Update the visible form and theme based on selected user type
     * @param {string} userType - Selected user type
     */
    function updateForms(userType) {
      debugUI("Switching to user type:", userType);
      
      // Synchronize all dropdowns
      const selectors = getTypeSelectors();
      selectors.simple.value = userType;
      selectors.band.value = userType;
      selectors.admin.value = userType;
      
      // Get form elements
      const forms = getForms();
      
      // Update theme color
      const bgColor = THEME_COLORS[userType] || THEME_COLORS["Simple User"];
      document.body.style.backgroundColor = bgColor;
      debugUI("Background color changed to:", bgColor);
      
      // Show/hide appropriate form
      switch (userType) {
        case "Admin User":
          forms.admin.style.display = "block";
          forms.band.style.display = "none";
          forms.simple.style.display = "none";
          debugUI("Showing Admin form");
          break;
          
        case "Band User":
          forms.band.style.display = "block";
          forms.simple.style.display = "none";
          forms.admin.style.display = "none";
          debugUI("Showing Band form");
          break;
          
        case "Simple User":
        default:
          forms.simple.style.display = "block";
          forms.band.style.display = "none";
          forms.admin.style.display = "none";
          debugUI("Showing Simple User form");
          break;
      }
    }
    
    // ----------------------------------------------------------------
    // INITIALIZATION
    // ----------------------------------------------------------------
    
    /**
     * Set up event listeners for form type changes
     */
    function initializeFormSwitching() {
      debugUI("Initializing form switching");
      
      const selectors = getTypeSelectors();
      
      // Attach change event listeners to all dropdowns
      selectors.simple.onchange = function () {
        debugUI("Simple form dropdown changed to:", this.value);
        updateForms(this.value);
      };
      
      selectors.band.onchange = function () {
        debugUI("Band form dropdown changed to:", this.value);
        updateForms(this.value);
      };
      
      selectors.admin.onchange = function () {
        debugUI("Admin form dropdown changed to:", this.value);
        updateForms(this.value);
      };
      
      // Initialize with Simple User form
      updateForms("Simple User");
      debugUI("Form switching initialized successfully");
    }
    
    // Run initialization when DOM is ready
    // Note: loginCheck.js also has a DOMContentLoaded listener
    // Both will run independently without conflicts
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeFormSwitching);
    } else {
      // DOM already loaded
      initializeFormSwitching();
    }
  </script>
</html>
